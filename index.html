<!DOCTYPE html>
<html ng-app="ZeroVidzUser" lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>

	<title>ZeroVidz User</title>

	<!-- CSS -->
		<!-- lib -->

		<!-- app -->
		<link href="assets/css/style.css" rel="stylesheet" type="text/css"/>
	<!-- /CSS -->

	<!-- HTML5 Shim -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<!--<base href="/">-->

</head>

<body class="ng-cloak" ng-controller="MainCtrl">

<input type='file' accept='image/*' file-model="myFile"><br>
<img id='output'>
<a ng-click="openFile()">upload</a>

<script>
	var openFile = function(event) {
	  	console.log(event);
	    var input = event.target;
	    var reader = new FileReader();
	    reader.onload = function(){
	    	console.log(reader);
			var dataURL = reader.result;
			var output = document.getElementById('output');
			output.src = dataURL;
			var imageUrl = dataURL.split(',')[1];
			var inner_path = "uploads/images/" + input.files[0].name;
			Page.cmd("fileWrite",[inner_path, imageUrl], function(res) {
				Page.cmd("wrapperNotification", ["done", "File Uploaded!", 10000]);
			});
	    };
	    reader.readAsDataURL(input.files[0]);
	};
</script>

	<!-- JS -->

		<!-- lib -->
		<script type="text/javascript" src="assets/lib/zeronet/ZeroFrame.js"></script>
		<script type="text/javascript" src="assets/lib/zeronet/ZeroChat.js"></script>
		<script type="text/javascript" src="assets/lib/angular/angular.min.js"></script>

		<!-- app -->
		<script type="text/javascript" src="app/application.js"></script>
		<script type="text/javascript" src="app/core/controllers/main.ctrl.js"></script>
		<script type="text/javascript" src="app/core/directives/file-model.directive.js"></script>

	<!-- /JS -->  

</body>

</html>
